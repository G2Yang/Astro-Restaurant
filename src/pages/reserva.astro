---
import Layout from "../layouts/Layout.astro";
import ReservaController from "../controllers/ReservaController";

if (Astro.request.method === "POST") {
	const reservaController = new ReservaController();
	const data = await Astro.request.formData();

	const nombre = data.get("Nombre");
	const telefono = data.get("Telefono");
	const email = data.get("Email");
	const date = data.get("Data");
	const time = data.get("Time");

	await reservaController.createItem(
		nombre,
		telefono,
		email,
		date,
		time
	);
	return Astro.redirect("/");
}
---

<Layout title="Nou TO-DO">
	<form method="post">
		<div class="md:flex md:items-center mb-6">
			<div class="md:w-1/3">
				<label
					class="block text-gray-500 md:text-right mb-1 md:mb-0 pr-4"
					for="inline-full-name"
				>
					Nombre:
				</label>
			</div>
			<div class="md:w-2/3">
				<input
					class="bg-gray-200 appearance-none border-2 border-gray-200 rounded w-full py-2 px-4 text-gray-700"
					name="Nombre"
					type="text"
				/>
			</div>
			<div class="md:w-1/3">
				<label
					class="block text-gray-500 md:text-right mb-1 md:mb-0 pr-4"
					for="inline-full-name"
				>
					Telefono:
				</label>
			</div>
			<div class="md:w-2/3">
				<input
					class="bg-gray-200 appearance-none border-2 border-gray-200 rounded w-full py-2 px-4 text-gray-700"
					name="Telefono"
					type="text"
				/>
			</div>
			<div class="md:w-1/3">
				<label
					class="block text-gray-500 md:text-right mb-1 md:mb-0 pr-4"
					for="inline-full-name"
				>
					Email:
				</label>
			</div>
			<div class="md:w-2/3">
				<input
					class="bg-gray-200 appearance-none border-2 border-gray-200 rounded w-full py-2 px-4 text-gray-700"
					name="Email"
					type="email"
				/>
			</div>

			<div class="md:w-1/3">
				<label
					class="block text-gray-500 md:text-right mb-1 md:mb-0 pr-4"
					for="inline-full-name"
				>
					Dia:
				</label>
			</div>
			<div class="md:w-2/3">
				<input
					class="bg-gray-200 appearance-none border-2 border-gray-200 rounded w-full py-2 px-4 text-gray-700"
					name="Data"
					type="date"
				/>
			</div>


			<div class="md:w-1/3">
				<label
					class="block text-gray-500 md:text-right mb-1 md:mb-0 pr-4"
					for="inline-full-name"
				>
					Time:
				</label>
			</div>
			<div class="md:w-2/3">
				<input
					class="bg-gray-200 appearance-none border-2 border-gray-200 rounded w-full py-2 px-4 text-gray-700"
					name="Time"
					type="time"
				/>
			</div>
		</div>

		<button>CONFIRMAR</button>
	</form>
</Layout>
